# Packages

This doc describes the function and dependency tree of the packages in this repo.

See [docs/buildgraph.mermaid](docs/buildgraph.mermaid) for the dependency graph.

We use [Just in Time Packages](https://turborepo.com/docs/core-concepts/internal-packages#just-in-time-packages) wherever possible, as we don't have that much code,
and compiled packages spend a ton of time just spinning up and down compilers.

Vite (and vitest) in watch mode will happily refresh when a JIT package dependency updates, so we
can just rely on them for watch mode for grassroots-frontend and grassroots-backend-e2etests.

The only dependencies we need to worry about actually compiling are grassroots-shared and openapi-metadata.

## openapi-metadata

Directly reads source from grassroots-shared and grassroots-backend, but otherwise has no dependency.
Writes metadata.ts into it's own package.

## grassroots-shared

Contains all logic shared between frontend and backend that doesn't rely on generated openAPI bindings.

## grassroots-backend

Depends on grassroots-shared and openapi-metadata.
Contains the backend.

## openapi-paths

Depends on grassroots-backend to have run with --gen-files-only.
Contains the openAPI bindings generated by the backend.

## grassroots-shared-net

Contains logic shared between grassroots-frontend and grassroots-backend-e2etests that relies on generated openAPI bindings (openapi-paths).

## grassroots-backend-e2etests

Depends on grassroots-backend and grassroots-shared-net.

## grassroots-frontend

Same dependencies as grassroots-backend-e2e-tests.
Contains the frontend.

## eslint_rules

No dependencies. Builds custom eslint rules. Must be built before linting.
